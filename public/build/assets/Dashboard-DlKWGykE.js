import{d as D,o as H,a as l,c as r,e,b as x,w as v,f as m,t as a,h as S,v as A,n as f,F as N,k as T,i as q,g as k,y as F,m as R,p as c,s as _,q as B,r as I}from"./app-Cu_8TONn.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"min-h-screen bg-slate-950 text-slate-100"},G={class:"sticky top-0 z-40 bg-slate-900/95 backdrop-blur border-b border-slate-800"},J={class:"container mx-auto px-6 py-4"},K={class:"flex items-center justify-between"},O={class:"flex items-center gap-4"},W={class:"container mx-auto px-6 py-12"},X={class:"max-w-6xl mx-auto"},Y={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},Z={class:"rounded-2xl border border-slate-800 bg-slate-900/40 p-6"},ee={class:"flex items-center justify-between"},te={class:"text-3xl font-semibold text-slate-100"},se={class:"rounded-2xl border border-slate-800 bg-slate-900/40 p-6"},oe={class:"flex items-center justify-between"},le={class:"text-3xl font-semibold text-green-400"},re={class:"rounded-2xl border border-slate-800 bg-slate-900/40 p-6"},ae={class:"flex items-center justify-between"},ne={class:"text-3xl font-semibold text-slate-400"},ie={class:"mb-6 flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between"},de={class:"relative flex-1 max-w-md"},ue={class:"flex gap-2"},ce={key:0,class:"rounded-2xl border border-slate-800 bg-slate-900/40 p-12 text-center"},be={key:1,class:"rounded-2xl border border-red-800/80 bg-red-900/40 p-12 text-center"},me={class:"text-red-400"},xe={key:2,class:"space-y-4"},ve={class:"p-6"},pe={class:"flex items-start gap-4"},ge={key:0,class:"flex-shrink-0 w-24 h-24 rounded-lg overflow-hidden bg-slate-800"},fe=["src","alt"],he={key:1,class:"flex-shrink-0 w-24 h-24 rounded-lg bg-gradient-to-br from-amber-400/10 to-cyan-400/10 flex items-center justify-center"},ke={class:"flex-1 min-w-0"},_e={class:"flex items-start justify-between gap-4"},we={class:"flex-1"},ye={class:"text-lg font-semibold text-slate-100 group-hover:text-amber-300 transition-colors"},Ce={class:"mt-1 text-sm text-slate-400 line-clamp-2"},je={class:"mt-3 flex items-center gap-4 text-xs text-slate-500"},Be={key:0},Me={key:1},Ee={class:"mt-4 flex items-center gap-2 pt-4 border-t border-slate-800"},Ve=["onClick"],ze={key:3,class:"rounded-2xl border border-slate-800 bg-slate-900/40 p-12 text-center"},Le={class:"mx-4 w-full max-w-md rounded-2xl border border-slate-800 bg-slate-900 p-6"},Pe={class:"text-slate-400 mb-6"},$e={class:"flex gap-3 justify-end"},De=["disabled"],He=D({__name:"Dashboard",setup(Se){const w=F(),{isAuthenticated:M,checkAuth:E}=R(),d=c([]),h=c(!0),b=c(""),p=c(""),i=c("all"),n=c(null),g=c(!1),V=_(()=>d.value.filter(s=>s.published_at).length),z=_(()=>d.value.filter(s=>!s.published_at).length),y=_(()=>d.value.filter(s=>{const t=s.title.toLowerCase().includes(p.value.toLowerCase())||s.content?.toLowerCase().includes(p.value.toLowerCase()),u=i.value==="all"||i.value==="published"&&s.published_at||i.value==="draft"&&!s.published_at;return t&&u})),C=async()=>{h.value=!0,b.value="";try{const s=await B.get("/admin/posts");d.value=s.data}catch(s){console.error("Error loading posts:",s),b.value=s.response?.data?.message||"Error al cargar los posts"}finally{h.value=!1}},L=s=>new Date(s).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),P=s=>{n.value=s},$=async()=>{if(n.value){g.value=!0;try{await B.delete(`/admin/posts/${n.value.id}`),d.value=d.value.filter(s=>s.id!==n.value.id),n.value=null}catch(s){console.error("Error deleting post:",s),s.response?.status===401?(b.value="Sesión expirada. Por favor, inicia sesión nuevamente.",setTimeout(()=>{w.push("/login")},2e3)):b.value=s.response?.data?.message||"Error al eliminar el post",n.value=null}finally{g.value=!1}}};return H(async()=>{if(await E(),!M.value){w.push("/login");return}await C()}),(s,t)=>{const u=I("router-link");return l(),r("div",U,[e("header",G,[e("div",J,[e("div",K,[e("div",O,[x(u,{to:"/",class:"flex items-center gap-2 text-slate-400 hover:text-amber-400 transition-colors"},{default:v(()=>[...t[6]||(t[6]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),m(" Volver al Blog ",-1)])]),_:1}),t[7]||(t[7]=e("h1",{class:"text-xl font-semibold"},"Panel de Administración",-1))]),x(u,{to:"/admin/posts/create",class:"flex items-center gap-2 rounded-lg bg-amber-400/90 px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-amber-300 transition-colors"},{default:v(()=>[...t[8]||(t[8]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),m(" Nuevo Post ",-1)])]),_:1})])])]),e("main",W,[e("div",X,[e("div",Y,[e("div",Z,[e("div",ee,[e("div",null,[t[9]||(t[9]=e("p",{class:"text-sm text-slate-400"},"Total Posts",-1)),e("p",te,a(d.value.length),1)]),t[10]||(t[10]=e("div",{class:"rounded-full bg-amber-400/20 p-3"},[e("svg",{class:"h-8 w-8 text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1))])]),e("div",se,[e("div",oe,[e("div",null,[t[11]||(t[11]=e("p",{class:"text-sm text-slate-400"},"Publicados",-1)),e("p",le,a(V.value),1)]),t[12]||(t[12]=e("div",{class:"rounded-full bg-green-400/20 p-3"},[e("svg",{class:"h-8 w-8 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),e("div",re,[e("div",ae,[e("div",null,[t[13]||(t[13]=e("p",{class:"text-sm text-slate-400"},"Borradores",-1)),e("p",ne,a(z.value),1)]),t[14]||(t[14]=e("div",{class:"rounded-full bg-slate-400/20 p-3"},[e("svg",{class:"h-8 w-8 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})])],-1))])])]),e("div",ie,[e("div",de,[S(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>p.value=o),type:"text",placeholder:"Buscar posts...",class:"w-full rounded-xl border border-slate-700 bg-slate-900/60 px-4 py-2 text-slate-100 placeholder:text-slate-500 focus:border-amber-300/70 focus:outline-none focus:ring-2 focus:ring-amber-400/30"},null,512),[[A,p.value]]),t[15]||(t[15]=e("svg",{class:"absolute right-3 top-2.5 h-5 w-5 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),e("div",ue,[e("button",{onClick:t[1]||(t[1]=o=>i.value="all"),class:f(["rounded-lg px-4 py-2 text-sm font-semibold transition-colors",i.value==="all"?"bg-amber-400/90 text-slate-950":"border border-slate-700 bg-slate-900/40 text-slate-300 hover:border-amber-400/30"])}," Todos ",2),e("button",{onClick:t[2]||(t[2]=o=>i.value="published"),class:f(["rounded-lg px-4 py-2 text-sm font-semibold transition-colors",i.value==="published"?"bg-amber-400/90 text-slate-950":"border border-slate-700 bg-slate-900/40 text-slate-300 hover:border-amber-400/30"])}," Publicados ",2),e("button",{onClick:t[3]||(t[3]=o=>i.value="draft"),class:f(["rounded-lg px-4 py-2 text-sm font-semibold transition-colors",i.value==="draft"?"bg-amber-400/90 text-slate-950":"border border-slate-700 bg-slate-900/40 text-slate-300 hover:border-amber-400/30"])}," Borradores ",2)])]),h.value?(l(),r("div",ce,[...t[16]||(t[16]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-400 mx-auto"},null,-1),e("p",{class:"text-slate-400 mt-4"},"Cargando posts...",-1)])])):b.value?(l(),r("div",be,[e("p",me,a(b.value),1),e("button",{onClick:C,class:"mt-4 rounded-lg bg-amber-400/90 px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-amber-300 transition-colors"}," Reintentar ")])):y.value.length>0?(l(),r("div",xe,[(l(!0),r(N,null,T(y.value,o=>(l(),r("div",{key:o.id,class:"group rounded-2xl border border-slate-800 bg-slate-900/40 overflow-hidden transition-all hover:border-amber-400/30"},[e("div",ve,[e("div",pe,[o.image_path?(l(),r("div",ge,[e("img",{src:`/storage/${o.image_path}`,alt:o.title,class:"w-full h-full object-cover"},null,8,fe)])):(l(),r("div",he,[...t[17]||(t[17]=[e("svg",{class:"h-8 w-8 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])])),e("div",ke,[e("div",_e,[e("div",we,[e("h3",ye,a(o.title),1),e("p",Ce,a(o.meta_description||o.content?.substring(0,150)+"..."),1)]),e("span",{class:f(["flex-shrink-0 rounded-full px-3 py-1 text-xs font-semibold",o.published_at?"bg-green-400/20 text-green-300":"bg-slate-400/20 text-slate-400"])},a(o.published_at?"Publicado":"Borrador"),3)]),e("div",je,[e("span",null,a(L(o.created_at)),1),t[18]||(t[18]=e("span",null,"•",-1)),e("span",null,a(o.user?.name||"Anónimo"),1),o.categories?.length?(l(),r("span",Be,"•")):k("",!0),o.categories?.length?(l(),r("span",Me,a(o.categories.map(j=>j.name).join(", ")),1)):k("",!0)])])]),e("div",Ee,[x(u,{to:`/article/${o.slug}`,target:"_blank",class:"flex items-center gap-2 rounded-lg border border-slate-700 bg-slate-900/40 px-3 py-2 text-xs font-semibold text-slate-300 hover:border-amber-400/30 hover:text-amber-300 transition-colors"},{default:v(()=>[...t[19]||(t[19]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),m(" Ver ",-1)])]),_:1},8,["to"]),x(u,{to:`/admin/posts/${o.id}/edit`,class:"flex items-center gap-2 rounded-lg border border-slate-700 bg-slate-900/40 px-3 py-2 text-xs font-semibold text-slate-300 hover:border-amber-400/30 hover:text-amber-300 transition-colors"},{default:v(()=>[...t[20]||(t[20]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),m(" Editar ",-1)])]),_:1},8,["to"]),e("button",{onClick:j=>P(o),class:"flex items-center gap-2 rounded-lg border border-red-700 bg-red-900/40 px-3 py-2 text-xs font-semibold text-red-300 hover:bg-red-900/60 transition-colors"},[...t[21]||(t[21]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),m(" Eliminar ",-1)])],8,Ve)])])]))),128))])):(l(),r("div",ze,[t[23]||(t[23]=e("svg",{class:"h-16 w-16 text-slate-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t[24]||(t[24]=e("p",{class:"text-slate-400 mb-4"},"No se encontraron posts",-1)),x(u,{to:"/admin/posts/create",class:"inline-block rounded-lg bg-amber-400/90 px-6 py-2 text-sm font-semibold text-slate-950 hover:bg-amber-300 transition-colors"},{default:v(()=>[...t[22]||(t[22]=[m(" Crear primer post ",-1)])]),_:1})]))])]),n.value?(l(),r("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-slate-950/80 backdrop-blur-sm",onClick:t[5]||(t[5]=q(o=>n.value=null,["self"]))},[e("div",Le,[t[25]||(t[25]=e("h3",{class:"text-lg font-semibold text-slate-100 mb-2"},"¿Eliminar post?",-1)),e("p",Pe,' ¿Estás seguro de que quieres eliminar "'+a(n.value.title)+'"? Esta acción no se puede deshacer. ',1),e("div",$e,[e("button",{onClick:t[4]||(t[4]=o=>n.value=null),class:"rounded-lg border border-slate-700 bg-slate-900/40 px-4 py-2 text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors"}," Cancelar "),e("button",{onClick:$,disabled:g.value,class:"rounded-lg bg-red-600 px-4 py-2 text-sm font-semibold text-white hover:bg-red-700 transition-colors disabled:opacity-50"},a(g.value?"Eliminando...":"Eliminar"),9,De)])])])):k("",!0)])}}}),Te=Q(He,[["__scopeId","data-v-79c14689"]]);export{Te as default};
